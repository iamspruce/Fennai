---
// Pagination.astro
interface Props {
    page: number;
    hasMore: boolean;
    hasPrevious: boolean;
    baseUrl: string;
}

const { page, hasMore, hasPrevious, baseUrl } = Astro.props;

// Only show "Page X" label if we're not on the lone first page
const showPageInfo = hasPrevious || hasMore;
---

<nav class="pagination" aria-label="Pagination">
    {
        hasPrevious && (
            <a
                href={`${baseUrl}?page=${page - 1}`}
                class="pagination-btn"
                aria-label="Previous page"
            >
                <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path d="M19 12H5M12 19l-7-7 7-7" />
                </svg>
                <span class="sr-only">Previous</span>
            </a>
        )
    }

    {
        showPageInfo && (
            <span class="pagination-info" aria-hidden="true">
                Page {page}
            </span>
        )
    }

    {
        hasMore && (
            <a
                href={`${baseUrl}?page=${page + 1}`}
                class="pagination-btn"
                aria-label="Next page"
            >
                <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
                <span class="sr-only">Next</span>
            </a>
        )
    }
</nav>

<style is:global>
    .pagination {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-m);
        margin-top: var(--space-l);
        padding: var(--space-m) 0;
    }

    .pagination-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: var(--space-s);
        min-width: 44px;
        height: 44px;
        background: var(--mauve-4);
        border: 1px solid var(--mauve-6);
        border-radius: var(--radius-m);
        color: var(--mauve-12);
        text-decoration: none;
        transition: all 0.2s ease;
        font-size: 0; /* Hide text, show only icon */
    }

    .pagination-btn:hover:not(:disabled) {
        background: var(--mauve-6);
        border-color: var(--mauve-8);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .pagination-btn:active {
        transform: translateY(0);
    }

    .pagination-info {
        color: var(--mauve-11);
        font-size: var(--text-sm);
        font-weight: 500;
    }

    /* Screen reader only */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    /* Optional: subtle focus style for keyboard users */
    .pagination-btn:focus-visible {
        outline: 2px solid var(--mauve-9);
        outline-offset: 2px;
    }
</style>
