---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProfilePreview from "@/components/ui/ProfilePreview.astro";
import LoginModal from "../islands/LoginModal";
import { getCurrentUser } from "../lib/firebase/auth";
import Logo from "@/components/ui/Logo.astro";

const user = await getCurrentUser(Astro);
if (user) {
	return Astro.redirect("/profile");
}
---

<BaseLayout title="Fennai - Voice Cloning Made Simple">
	<div class="page-modal">
		<header class="home-header">
			<div class="logo">
				<Logo size={40} />
				<h4>Fennai</h4>
			</div>

			<button class="btn-login" id="open-login"> Login / Sign Up </button>
		</header>

		<main class="home-main">
			<h1 class="hero-title">
				<span class="text-avatars">Voice cloning should not be</span>
				<span class="text-video">rocket science.</span>
			</h1>

			<p class="hero-subtitle">
				Create realistic voice clones in minutes. Perfect for content
				creators, game developers, and storytellers.
			</p>

			<div class="demo-perspective-wrapper">
				<div class="demo-tilt-container">
					<ProfilePreview />
				</div>
			</div>
		</main>

		<footer class="home-footer">
			<div class="footer-content">
				<p class="copyright">Â© 2025 Fennai. All rights reserved.</p>
				<div class="footer-links">
					<a href="#">Privacy</a>
					<a href="#">Terms</a>
					<a href="#">Contact</a>
				</div>

				<div class="social-links">
					<a href="#" aria-label="Twitter">
						<svg
							width="20"
							height="20"
							viewBox="0 0 24 24"
							fill="currentColor"
						>
							<path
								d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"
							></path>
						</svg>
					</a>
					<a href="#" aria-label="GitHub">
						<svg
							width="20"
							height="20"
							viewBox="0 0 24 24"
							fill="currentColor"
						>
							<path
								d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"
							></path>
						</svg>
					</a>
				</div>
			</div>
		</footer>
	</div>

	<LoginModal client:load />
</BaseLayout>

<script>
	const openButton = document.getElementById("open-login");
	if (openButton) {
		openButton.addEventListener("click", () => {
			window.dispatchEvent(new CustomEvent("open-login-modal"));
		});
	}
</script>

<style>
	/* --- HEADER STYLES --- */
	.home-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: var(--space-3xs) 0;
	}

	.logo {
		display: flex;
		align-items: center;
		gap: var(--space-2xs);
	}

	.logo-text {
		font-size: var(--step-1);
		font-weight: 700;
		letter-spacing: -0.02em;
		color: var(--mauve-12);
	}

	.btn-login {
		background: var(--mauve-12);
		color: var(--mauve-1);
		border: none;
		padding: 12px 28px;
		border-radius: 99px;
		font-weight: 600;
		font-size: var(--step-0);
		cursor: pointer;
		transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
	}
	.btn-login:hover {
		transform: translateY(-2px);
		box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
	}

	/* --- HERO TYPOGRAPHY --- */
	.home-main {
		text-align: center;
		padding: var(--space-s) 0;
	}

	.hero-title {
		font-size: calc(var(--step-5) * 1.5); /* Very large text */
		font-weight: 800;
		line-height: 1.1;
		letter-spacing: -0.04em;
		margin-top: var(--space-2xl);
		margin-bottom: var(--space-s);
		display: flex;
		flex-direction: column;
		align-items: center;

		/* Apply animated background to entire title */
		background-image: url("https://media.giphy.com/media/l0HlNQ03J5JxX6lva/giphy.gif");
		background-size: cover;
		background-position: center;
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
	}

	/* Remove separate text effect classes */
	.text-avatars,
	.text-video {
		/* Inherit from parent */
	}

	.hero-subtitle {
		font-size: var(--step-2);
		color: var(--mauve-11);
		max-width: 600px;
		margin: 0 auto;
		line-height: 1.5;
		font-weight: 400;
	}

	/* --- 3D PREVIEW SECTION --- */
	.demo-perspective-wrapper {
		margin-top: var(--space-3xs);
		width: 100%;
		display: flex;
		justify-content: center;
		perspective: 2000px;
	}

	.demo-tilt-container {
		transform: rotateX(15deg) rotateZ(-3deg) rotateY(8deg);
		transform-style: preserve-3d;
		transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
		filter: drop-shadow(0 30px 60px rgba(0, 0, 0, 0.3));
	}

	.demo-perspective-wrapper:hover .demo-tilt-container {
		transform: rotateX(8deg) rotateZ(-1deg) rotateY(4deg) scale(1.02);
		filter: drop-shadow(0 40px 80px rgba(0, 0, 0, 0.4));
	}

	/* --- FOOTER --- */
	.home-footer {
		margin-top: 8rem;
		padding: var(--space-3xs);
	}

	.footer-content {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.copyright {
		color: var(--mauve-11);
		font-size: var(--step-0);
	}

	.footer-links {
		display: flex;
		gap: var(--space-s);
	}

	.footer-links a {
		color: var(--mauve-12);
		text-decoration: none;
		font-size: var(--step-0);
		transition: color var(--transition-fast);
	}

	.footer-links a:hover {
		color: var(--pink-9);
	}

	.social-links {
		display: flex;
		gap: var(--space-xs);
	}

	.social-links a {
		width: 36px;
		height: 36px;
		display: flex;
		align-items: center;
		justify-content: center;
		border-radius: var(--radius-full);
		color: var(--mauve-12);
		transition: all var(--transition-fast);
	}

	.social-links a:hover {
		background: var(--mauve-3);
		color: var(--pink-9);
	}

	@media (max-width: 768px) {
		.footer-content {
			flex-direction: column;
			gap: var(--space-xs);
		}
		.demo-tilt-container {
			/* Less tilt on mobile to preserve readability */
			transform: rotateX(10deg);
		}
	}
	@media (max-width: 425px) {
		.hero-title {
			font-size: var(--step-4);
		}
	}
</style>
